---
import {twMerge} from "tailwind-merge";
interface Props {
    className?: string;
    slidesId: string;
}

const {slidesId, className} = Astro.props;
---

<slide-show data-id={slidesId} class={twMerge('h-full', className)}>
    <div class=`slide slide-items-${slidesId} fade`><img src="/pitch-deck-1.png" alt=""></div>
    <div class=`slide slide-items-${slidesId} fade`><img src="/pitch-deck-2.png" alt=""></div>
    <div class=`slide slide-items-${slidesId} fade`><img src="/pitch-deck-3.png" alt=""></div>
    <div class=`slide slide-items-${slidesId} fade`><img src="/pitch-deck-4.png" alt=""></div>
    <div class=`slide slide-items-${slidesId} fade`><img src="/pitch-deck-5.png" alt=""></div>
</slide-show>


<script>

    class PricingCard extends HTMLElement {
        constructor() {
            super();

            // Read the message from the data attribute.
            const message = this.dataset.id;

            let slideIndex = 0;

            if (message) {
                showSlides();
            }

            function showSlides() {
                let i;
                let slides = document.getElementsByClassName(`slide-items-${message}`);

                // Hide all slides
                for (i = 0; i < slides.length; i++) {
                    slides[i].style.display = "none";
                }

                slideIndex++;

                // If we've gone past the end, loop back to the beginning
                if (slideIndex > slides.length) {
                    slideIndex = 1;
                }

                (slides[slideIndex - 1] as HTMLElement).style.display = "flex";

                // Change slide every 2 seconds
                setTimeout(showSlides, 2000);
            }

        }
    }

    customElements.define('slide-show', PricingCard);
</script>


<style>
    .slide {
        display: none;
        flex-direction: column;
        align-items: end;
        justify-content: end;
        width: 100%;
        height: 100%;
        background: #e5e7eb;
    }

    .slide img {
        height: 100%;
        aspect-ratio: 3/2;
    }

    @media (max-width: 640px) {
        .slide img {
            height: unset;
        }
    }

    .fade {
        animation-name: fade;
        animation-duration: 1.5s;
    }

    @keyframes fade {
        from {
            opacity: 0.4;
        }
        to {
            opacity: 1;
        }
    }
</style>